{"version":3,"sources":["hoc/withAuthRedirect.js","components/FormsControls/FormControls.module.css","components/FormsControls/FormsControls.js","validators/validators.js","Store/man.png","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/Profile/ProfileInfo.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/MyPosts/MyPost.module.css","components/Profile/ProfileStatusHooks.jsx","components/Profile/ProfileInfo.jsx","components/Profile/MyPosts/Post/react.png","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPost.jsx","components/Profile/MyPosts/MyPostContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["withAuthRedirect","Component","this","props","isAuth","to","React","module","exports","Textarea","input","meta","hasError","touched","error","className","style","formControl","Input","requiredField","value","maxLengthCreator","maxLength","length","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","unsupportedIterableToArray","TypeError","ProfileStatusHooks","useState","editMode","setEditMode","status","setStatus","useEffect","onDoubleClick","autoFocus","onBlur","updateStatus","onChange","e","currentTarget","ProfileInfo","profile","Preloader","description","photo","src","photos","large","userPhoto","alt","isOwner","type","target","files","uploadPhoto","text","fullName","Post","item","react","likes","maxLength50","AddPostFormRedux","reduxForm","form","onSubmit","handleSubmit","textarea","Field","component","name","placeholder","validate","button","MyPost","postsElements","posts","map","post","postsPadding","values","addPost","newPostBody","MyPostContainer","connect","state","profilePage","defaultPostText","dispatch","addPostActionCreator","Profile","ProfileContainer","id","match","params","myId","history","getUserProfile","getStatus","updateProfile","prevProps","compose","auth","withRouter"],"mappings":"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","file":"static/js/4.e99af460.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if (!this.props.isAuth) return <Redirect to='/login' />\r\n            return <Component {...this.props} />\r\n        }\r\n    }\r\n    return RedirectComponent;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormControls_formControl__P_EJZ\",\"error\":\"FormControls_error__1D48X\",\"formAnyError\":\"FormControls_formAnyError__3-0vq\"};","import React from 'react';\r\nimport style from './FormControls.module.css'\r\n\r\nexport const Textarea = ({ input, meta, ...props }) => {\r\n    const hasError = meta.touched && meta.error;\r\n\r\n    return (\r\n        <div className={style.formControl + ' ' + (hasError ? style.error : '')}>\r\n            <div>\r\n                <textarea {...input} {...props} />\r\n            </div>\r\n            { hasError && <span>{meta.error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Input = ({ input, meta, ...props }) => {\r\n    const hasError = meta.touched && meta.error;\r\n\r\n    return (\r\n        <div className={style.formControl + ' ' + (hasError ? style.error : '')}>\r\n            <div>\r\n                <input {...input} {...props} />\r\n            </div>\r\n            { hasError && <span>{meta.error}</span>}\r\n        </div>\r\n    )\r\n}","export const requiredField = value => {\r\n    if (value) return undefined;\r\n    return 'Обязательное поле!';\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n    if (value && value.length > maxLength) return `Максимальная длина ${maxLength} символа(ов)!`;\r\n    return undefined;\r\n}","export default __webpack_public_path__ + \"static/media/man.9b83f216.png\";","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"description\":\"ProfileInfo_description__21Wgb\",\"img\":\"ProfileInfo_img__189IB\",\"text\":\"ProfileInfo_text__2Fgkr\",\"photo\":\"ProfileInfo_photo__siJZu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__64m3H\",\"likes\":\"Post_likes__29It4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsPadding\":\"MyPost_postsPadding__3VY_d\",\"button\":\"MyPost_button__3aVfd\",\"textarea\":\"MyPost_textarea__287dQ\"};","import React, { useEffect, useState } from 'react';\r\n\r\nconst ProfileStatusHooks = (props) => {\r\n\r\n    let [editMode, setEditMode] = useState(false);\r\n    let [status, setStatus] = useState(props.status);\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    const activateMode = () => {\r\n        setEditMode(true);\r\n    }\r\n    const deactivateMode = () => {\r\n        setEditMode(false);\r\n        props.updateStatus(status)\r\n    }\r\n    const onChangeStatus = (e) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            {!editMode && <div>\r\n                <span onDoubleClick={activateMode}>Статус: {props.status || 'No status'}</span>\r\n            </div>\r\n            }\r\n            {editMode && <div>\r\n                <input autoFocus={true} onBlur={deactivateMode} onChange={onChangeStatus} value={status} />\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\nexport default ProfileStatusHooks;","import React from 'react';\r\nimport userPhoto from '../../Store/man.png';\r\nimport style from './ProfileInfo.module.css';\r\nimport Preloader from '../Preloader/Preloader';\r\nimport ProfileStatusHooks from './ProfileStatusHooks';\r\n\r\nconst ProfileInfo = (props) => {\r\n\r\n    if (!props.profile) {\r\n        return <div><Preloader /></div>\r\n    }\r\n\r\n    const onPhotoSelected = (e) => {\r\n        if (e.target.files.length) {\r\n            props.uploadPhoto(e.target.files[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={style.description}>\r\n                <img className={style.photo} src={props.profile.photos.large || userPhoto} alt='' />\r\n                <div>{props.isOwner && <input type={'file'} onChange={onPhotoSelected}></input>}</div>\r\n            </div>\r\n            <div className={style.text}>\r\n                <div>Имя пользователя: {props.profile.fullName}</div>\r\n                <ProfileStatusHooks status={props.status} updateStatus={props.updateStatus} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default ProfileInfo;","export default __webpack_public_path__ + \"static/media/react.51facde9.png\";","import React from 'react';\r\nimport react from './react.png';\r\nimport style from './Post.module.css';\r\n\r\nconst Post = (props) => {\r\n    return (\r\n        <div className={style.item}>\r\n            <img src={react} alt='' />\r\n            <div>\r\n                {props.text}\r\n            </div>\r\n            <div className={style.likes}>{props.likes} лайков</div>\r\n        </div>\r\n    );\r\n}\r\nexport default Post;","import React from 'react';\r\nimport Post from './Post/Post';\r\nimport style from './MyPost.module.css';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { Textarea } from '../../FormsControls/FormsControls';\r\nimport { maxLengthCreator } from '../../../validators/validators';\r\n\r\nconst MyPost = (props) => {\r\n\r\n    let postsElements = props.posts.map(post => <Post text={post.text} likes={post.likes} />);\r\n\r\n    let onPostChange = (values) => {\r\n        props.addPost(values.newPostBody);\r\n    }\r\n\r\n    return (\r\n        <div className={style.postsPadding}>\r\n            <div>\r\n                <h3>Мои посты</h3>\r\n                <div>\r\n                    <AddPostFormRedux onSubmit={onPostChange} />\r\n                </div>\r\n            </div>\r\n            <div>\r\n                {postsElements}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst maxLength50 = maxLengthCreator(50);\r\n\r\nconst addPostForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div className={style.textarea}>\r\n                <Field component={Textarea} name='newPostBody' placeholder='Введите текст' validate={maxLength50} />\r\n            </div>\r\n            <div>\r\n                <button className={style.button}>Добавить</button>\r\n                <button className={style.button}>Удалить</button>\r\n            </div>\r\n        </form >\r\n\r\n    )\r\n}\r\nconst AddPostFormRedux = reduxForm({ form: 'addPostForm' })(addPostForm)\r\nexport default MyPost;","import MyPost from './MyPost';\r\nimport { connect } from 'react-redux';\r\nimport { addPostActionCreator } from '../../../Store/profilePageReducer';\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        posts: state.profilePage.posts,\r\n        defaultPostText: state.profilePage.defaultPostText\r\n    };\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addPost: (newPostBody) => {\r\n            dispatch(addPostActionCreator(newPostBody));\r\n        }\r\n    };\r\n}\r\n\r\nconst MyPostContainer = connect(mapStateToProps, mapDispatchToProps)(MyPost);\r\n\r\nexport default MyPostContainer;","import React from 'react';\r\nimport ProfileInfo from './ProfileInfo';\r\nimport MyPostContainer from './MyPosts/MyPostContainer';\r\n\r\nconst Profile = (props) => {\r\n  return (\r\n    <div>\r\n      <ProfileInfo uploadPhoto={props.uploadPhoto}\r\n        isOwner={props.isOwner}\r\n        profile={props.profile}\r\n        status={props.status}\r\n        updateStatus={props.updateStatus} />\r\n      <MyPostContainer />\r\n    </div>\r\n  );\r\n}\r\nexport default Profile;","import React from 'react';\r\nimport Profile from './Profile';\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { getStatus, updateStatus, uploadPhoto, getUserProfile } from '../../Store/profilePageReducer';\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n    updateProfile() {\r\n        let id = this.props.match.params.id;\r\n        if (!id) {\r\n            id = this.props.myId\r\n            if (!id) {\r\n                this.props.history.push('/login');\r\n            }\r\n        }\r\n        this.props.getUserProfile(id);\r\n        this.props.getStatus(id);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateProfile();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.match.params.id !== prevProps.match.params.id) {\r\n            this.updateProfile();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <Profile {...this.props}\r\n            profile={this.props.profile}\r\n            status={this.props.status}\r\n            updateStatus={this.props.updateStatus}\r\n            isOwner={!this.props.match.params.id}\r\n            uploadPhoto={this.props.uploadPhoto} />\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    isAuth: state.auth.isAuth,\r\n    myId: state.auth.id\r\n});\r\n\r\nexport default compose(connect(mapStateToProps, { getUserProfile, getStatus, updateStatus, uploadPhoto }),\r\n    withRouter,\r\n    withAuthRedirect)(ProfileContainer)"],"sourceRoot":""}